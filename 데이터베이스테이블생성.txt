create TABLE USER(
    user_id         INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY,
    user_name       VARCHAR(20)     NOT NULL,
    user_phone      VARCHAR(11)     NOT NULL,
    user_birthday   date            NOT NULL,
    role            ENUM('GUEST', 'HOST', 'ADMIN')            NOT NULL,
    login_id        VARCHAR(21)     NOT NULL,
    login_pwd       VARCHAR(21)     NOT NULL
);

CREATE TABLE HOUSE(
    house_id        INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY,
    house_name      VARCHAR(21)     NOT NULL,
    house_address   VARCHAR(52)     NOT NULL,
    house_introduce VARCHAR(52)     NOT NULL,
    capacity        INT             NOT NULL,
    bedroom         INT             NOT NULL,
    bed             INT             NOT NULL,
    bathroom        INT             NOT NULL
);

CREATE TABLE WAITING(
    waiting_id      INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY,
    house_id        INT             NOT NULL,

    FOREIGN KEY(house_id) REFERENCES HOUSE(house_id)
);

CREATE TABLE APPROVED(
    approve_id      INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY,
    waiting_id      INT             NOT NULL,
    isApproved      BOOLEAN         NOT NULL,

    FOREIGN KEY (waiting_id) REFERENCES WAITING(waiting_id)
);

CREATE TABLE Amenities(
    amenities_id    INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY,
    amenities       VARCHAR(12)     NOT NULL
);

CREATE TABLE HOUSE_AMENITIES(
    house_id        INT             NOT NULL,
    amenities_id    INT             NOT NULL,

    FOREIGN KEY (house_id)      REFERENCES HOUSE(house_id),
    FOREIGN KEY (amenities_id)  REFERENCES Amenities(amenities_id)
);

CREATE TABLE RESERVATION(
    reservation_id      INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY,
    reservation_status  enum('WAIT', 'APPROVED', 'NOT_APPROVED', 'BEFORE_STAY', 'STAY', 'AFTER_STAY')      NOT NULL,
    guests_num          INT             NOT NULL,   # 손님 수
    reservation_date    date            NOT NULL,
    check_in            date            NOT NULL,
    check_out           date            NOT NULL,
    user_id             INT             NOT NULL,
    house_id            INT             NOT NULL,
    cost                INT             NOT NULL,

    FOREIGN KEY (user_id) REFERENCES USER(user_id),
    FOREIGN KEY (house_id) REFERENCES HOUSE(house_id)
);

CREATE TABLE FEE_POLICY(
    fee_id              INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY ,
    house_id            INT             NOT NULL,
    weekday             INT             NOT NULL,
    weekend             INT             NOT NULL,

    FOREIGN KEY (house_id) REFERENCES HOUSE(house_id)
);

CREATE TABLE DISCOUNT_OPT(
    discount_opt        INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY ,
    discount_amount     INT             NULL,
    discount_rate       INT             NULL
);

CREATE TABLE DISCOUNT_POLICY(
    discount_id         INT             NOT NULL    AUTO_INCREMENT      PRIMARY KEY ,
    discount_day        INT             NOT NULL ,
    discount_opt        INT             NOT NULL ,
    house_id            INT             NOT NULL ,

    FOREIGN KEY (discount_opt) REFERENCES DISCOUNT_OPT(discount_opt),
    FOREIGN KEY (house_id) REFERENCES HOUSE(house_id)
);